<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åŒ»å­¦ç»Ÿè®¡å­¦äº’åŠ¨å®éªŒå¯¼èˆª | Medical Statistics Lab Portal</title>
  <meta name="description" content="Interactive teaching labs for medical statistics by Zhenti Cui.">
  <style>
    :root {
      --bg: #f3f6f9;
      --card: #ffffff;
      --ink: #1f2937;
      --sub: #6b7280;
      --brand: #0e639c;
      --brand-ink: #0b4f7a;
      --shadow: rgba(0,0,0,.1);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 40px 20px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      color: var(--ink);
      background: linear-gradient(105deg, #eef2f3 0%, #d9e2ec 100%);
    }
    header {
      max-width: 1000px; margin: 0 auto 24px;
      text-align: center;
    }
    header h1 {
      margin: 0 0 8px; font-size: 28px; color: var(--brand);
    }
    header p { margin: 0; color: var(--sub); }
    .grid {
      max-width: 1000px; margin: 24px auto;
      display: grid; gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }
    a.card {
      text-decoration: none; color: inherit;
      background: var(--card);
      border-radius: 14px;
      padding: 18px 16px;
      box-shadow: 0 6px 16px var(--shadow);
      transition: transform .18s ease, box-shadow .18s ease;
      display: block; text-align: left;
      border: 1px solid #e5e7eb;
      min-height: 108px;
    }
    a.card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 22px rgba(0,0,0,.14);
      border-color: #d1d5db;
    }
    .title { font-weight: 700; font-size: 18px; margin: 0 0 6px; color: var(--brand-ink); }
    .desc { margin: 0; color: var(--sub); font-size: 14px; }
    .pill {
      display: inline-block; font-size: 12px; padding: 2px 8px; border-radius: 999px;
      background: #e0f2fe; color: #075985; margin-left: 8px;
      vertical-align: middle;
    }
    footer { text-align: center; margin: 36px auto 8px; color: var(--sub); font-size: 13px; }
    .muted { color: var(--sub); }
    .toolbar {
      max-width: 1000px; margin: 8px auto 0;
      display: flex; gap: 8px; align-items: center; justify-content: center; flex-wrap: wrap;
    }
    .search {
      width: 100%; max-width: 420px;
      display: flex; gap: 8px;
    }
    .search input {
      flex: 1; padding: 10px 12px; border-radius: 10px; border: 1px solid #d1d5db; outline: none;
    }
    .search input:focus { border-color: #93c5fd; box-shadow: 0 0 0 3px rgba(147,197,253,.35); }
    .hidden { display: none !important; }
  </style>
</head>
<body>
<header>
  <h1>åŒ»å­¦ç»Ÿè®¡å­¦äº’åŠ¨å®éªŒå¯¼èˆª</h1>
  <p class="muted">Medical Statistics Interactive Teaching Labs Â· GitHub Pages</p>
  <div class="toolbar">
    <div class="search">
      <input id="q" type="search" placeholder="æœç´¢æ¨¡å—ï¼ˆå¦‚ Chiã€tã€å›å½’ã€normalã€logisticï¼‰..." aria-label="Search labs">
    </div>
  </div>
</header>

<main class="grid" id="grid">
  <div class="muted" id="loading">æ­£åœ¨åŠ è½½å®éªŒåˆ—è¡¨...</div>
</main>

<footer>
  Â© <span id="y"></span> Zhenti Cui Â· Zhengzhou Sias University Â· <a href="https://github.com/zhentic/Medicalstatistic" target="_blank" rel="noopener">GitHub</a>
</footer>

<script>
  // ---- åŸºç¡€é…ç½® ----
  const GITHUB_USER = "zhentic";
  const REPO_NAME   = "Medicalstatistic";
  const PAGES_ROOT  = `https://${GITHUB_USER}.github.io/${REPO_NAME}/`;

  // è‡ªå®šä¹‰æ ‡é¢˜æ˜ å°„ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
  const mapping = {
    "chi_square_lab.html": "ğŸ“Š å¡æ–¹æ£€éªŒ (Chi-Square Test)",
    "t_distribution_demo_fixed.html": "ğŸ“ˆ t æ£€éªŒæ¼”ç¤º (T-Test)",
    "normal_distribution.html": "ğŸ”” æ­£æ€åˆ†å¸ƒ (Normal Distribution)",
    "Parameter Estimator_Medical Statistics.html": "ğŸ“ å‚æ•°ä¼°è®¡ (Parameter Estimation)",
    "OLS Linear Regression_Interactive Teaching Lab.html": "ğŸ“‰ çº¿æ€§å›å½’ (OLS Regression)",
    "åŠ¨æ€ç½®ä¿¡åŒºé—´æ¼”ç¤º.html": "ğŸ åŠ¨æ€ç½®ä¿¡åŒºé—´ (Dynamic CI Demo)"
  };

  // æ–‡ä»¶åç¾åŒ–ä¸ºå¯è¯»æ ‡é¢˜
  function beautifyName(name) {
    return name
      .replace(/\.html?$/i, "")        // å»æ‰©å±•å
      .replace(/[_-]+/g, " ")           // _ æˆ– - è½¬ç©ºæ ¼
      .replace(/\s+/g, " ")
      .trim()
      .replace(/\b[a-z]/g, c => c.toUpperCase()); // å•è¯é¦–å­—æ¯å¤§å†™
  }

  // ç®€å•æè¿°ç”Ÿæˆï¼ˆå¯æŒ‰éœ€æ‰©å±•ï¼‰
  function genDesc(filename) {
    const key = filename.toLowerCase();
    if (key.includes("chi") || key.includes("å¡æ–¹")) return "Pearson / Yates / Fisher é€‰é¡¹ä¸æœŸæœ›é¢‘æ•°è‡ªåŠ¨è®¡ç®—";
    if (key.includes("t_") || key.includes("t-") || key.includes("t ")) return "å•æ ·æœ¬ / åŒæ ·æœ¬ / åˆ†å¸ƒæ¼”ç¤º";
    if (key.includes("normal")) return "æ­£æ€åˆ†å¸ƒå½¢çŠ¶ä¸å‚æ•°å¯è°ƒæ¼”ç¤º";
    if (key.includes("regression") || key.includes("ols")) return "å›å½’ç³»æ•°ã€æ®‹å·®ä¸æ‹Ÿåˆå¯è§†åŒ–";
    if (key.includes("parameter") || key.includes("ä¼°è®¡")) return "æŠ½æ ·ä¸åŒºé—´ä¼°è®¡çš„äº¤äº’å¼ä»¿çœŸ";
    if (key.includes("ç½®ä¿¡") || key.includes("ci")) return "ç½®ä¿¡åŒºé—´çš„åŠ¨æ€ç›´è§‚å±•ç¤º";
    if (key.includes("logistic")) return "äºŒåˆ†ç±»é€»è¾‘å›å½’ï¼šä¼¼ç„¶ã€ç³»æ•°ä¸é¢„æµ‹æ¦‚ç‡";
    return "Interactive Web Demo";
  }

  // æ¸²æŸ“å¡ç‰‡
  function render(list) {
    const grid = document.getElementById("grid");
    grid.innerHTML = "";
    list.forEach(f => {
      const title = mapping[f.name] || "ğŸ“˜ " + beautifyName(f.name);
      const desc  = genDesc(f.name);
      const a = document.createElement("a");
      a.className = "card"; a.href = PAGES_ROOT + encodeURIComponent(f.name);
      a.innerHTML = `<div class="title">${title}</div><p class="desc">${desc}</p>`;
      a.setAttribute("data-title", title.toLowerCase());
      grid.appendChild(a);
    });
    if (!list.length) {
      grid.innerHTML = '<div class="muted">æœªæ‰¾åˆ°ä»»ä½•å®éªŒé¡µé¢ã€‚</div>';
    }
  }

  // è¿‡æ»¤æœç´¢
  function setupSearch(all) {
    const q = document.getElementById("q");
    q.addEventListener("input", () => {
      const kw = q.value.trim().toLowerCase();
      const filtered = !kw ? all : all.filter(f => {
        const t = (mapping[f.name] || beautifyName(f.name)).toLowerCase();
        return f.name.toLowerCase().includes(kw) || t.includes(kw);
      });
      render(filtered);
    });
  }

  // åŠ è½½ä»“åº“æ–‡ä»¶åˆ—è¡¨ï¼ˆGitHub APIï¼‰
  async function main() {
    document.getElementById("y").textContent = new Date().getFullYear();
    const loading = document.getElementById("loading");
    try {
      const api = `https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents`;
      const res = await fetch(api);
      if (!res.ok) throw new Error("GitHub API error: " + res.status);
      const data = await res.json();

      // ä»…å–æ ¹ç›®å½• .htmlï¼Œæ’é™¤ index.html
      const htmlFiles = data
        .filter(f => f.type === "file" && /\.html?$/i.test(f.name) && f.name.toLowerCase() !== "index.html")
        .sort((a, b) => a.name.localeCompare(b.name, "en"));

      render(htmlFiles);
      setupSearch(htmlFiles);
    } catch (e) {
      console.error(e);
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      const tips = document.createElement("div");
      tips.className = "muted";
      tips.innerHTML = `æ— æ³•é€šè¿‡ GitHub API åŠ è½½æ–‡ä»¶åˆ—è¡¨ã€‚ä½ ä»å¯æ‰‹åŠ¨è®¿é—®ï¼š<br>
        <a href="${PAGES_ROOT}chi_square_lab.html">${PAGES_ROOT}chi_square_lab.html</a>`;
      grid.appendChild(tips);
    } finally {
      if (loading) loading.classList.add("hidden");
    }
  }
  main();
</script>
</body>
</html>
