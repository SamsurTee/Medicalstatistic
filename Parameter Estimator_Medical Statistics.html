<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Medical Statistics — Parameter Estimator</title>
<style>
  :root { --w: 920px; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; line-height: 1.45; margin: 0; background:#fafafa; color:#111; }
  header { background: #0f766e; color: #fff; padding: 18px 16px; }
  header h1 { margin: 0 0 4px 0; font-size: 22px; font-weight: 700; }
  header p { margin: 0; opacity: .95; }
  main { max-width: var(--w); margin: 20px auto; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 16px; }
  .grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
  @media (min-width: 880px){ .grid-2 { grid-template-columns: 1fr 1fr; } }
  label { font-weight: 600; display: block; margin-bottom: 4px; }
  select, input[type=number], input[type=text], textarea { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; background:#fff; }
  textarea { min-height: 110px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
  .row { display:flex; gap:10px; flex-wrap: wrap; }
  .btn { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius: 8px; border:1px solid #0f766e; background:#0f766e; color:#fff; cursor:pointer; text-decoration:none; font-weight:600; }
  .btn.secondary { background:#fff; color:#0f766e; }
  .muted { color:#555; font-size: 14px; }
  .card { border:1px solid #e5e7eb; border-radius: 10px; padding: 12px; background:#fcfcfc; }
  .danger { color:#b91c1c; }
  .ok { color:#065f46; }
  details { background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px; padding:8px 10px; }
  code.k { background:#f3f4f6; padding:2px 6px; border-radius:6px; }
  .list { margin: 6px 0 0 18px; }
  footer { max-width: var(--w); margin: 14px auto 40px; color:#666; padding: 0 6px; }
  .pill { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid #d1d5db; font-size:12px; background:#fff; margin-left:6px;}
</style>
</head>
<body>
<header>
  <h1>Parameter Estimator — Medical Statistics</h1>
  <p>Paste data or enter summary stats. Get point estimates, SE, and confidence intervals with step-by-step details.</p>
</header>
<main>
  <div class="grid grid-2">
    <div>
      <label>Estimator</label>
      <select id="estimator">
        <option value="one_mean">One-sample mean (t or z)</option>
        <option value="one_prop">One-sample proportion (Wilson CI)</option>
        <option value="two_means">Two-sample mean difference (Welch)</option>
        <option value="two_props">Two-sample proportion difference (Newcombe/Wilson)</option>
        <option value="var_ci">Variance / SD CI (chi-square)</option>
      </select>
    </div>
    <div>
      <label>Confidence level</label>
      <select id="confLevel">
        <option value="0.90">90%</option>
        <option value="0.95" selected>95%</option>
        <option value="0.99">99%</option>
      </select>
      <span class="pill" id="dfPill" title="Degrees of freedom info appears here"></span>
    </div>
  </div>

  <div id="modeWrap" class="grid" style="margin-top:10px;">
    <div class="row">
      <label>Input mode</label>
      <div class="row">
        <button class="btn secondary" id="modeRawBtn">Raw data</button>
        <button class="btn secondary" id="modeSummaryBtn">Summary stats</button>
        <button class="btn secondary" id="exampleBtn">Load example</button>
      </div>
    </div>
  </div>

  <div id="rawInputs" class="grid grid-2" style="display:none;">
    <div>
      <label>Sample A data (numbers separated by commas, spaces, or newlines)</label>
      <textarea id="rawA" placeholder="e.g., 12, 13, 15, 9, 11"></textarea>
    </div>
    <div id="rawBwrap" style="display:none;">
      <label>Sample B data</label>
      <textarea id="rawB" placeholder="e.g., 14, 10, 18, 12"></textarea>
    </div>
  </div>

  <div id="summaryInputs" class="grid grid-2">
    <div>
      <label>Sample A — n</label>
      <input id="n1" type="number" min="1" step="1" placeholder="e.g., 25">
    </div>
    <div id="n2wrap" style="display:none;">
      <label>Sample B — n</label>
      <input id="n2" type="number" min="1" step="1" placeholder="e.g., 22">
    </div>
    <div id="mean1wrap">
      <label>Sample A — mean (or p̂ for proportions)</label>
      <input id="mean1" type="number" step="any" placeholder="e.g., 10.2">
    </div>
    <div id="mean2wrap" style="display:none;">
      <label>Sample B — mean (or p̂)</label>
      <input id="mean2" type="number" step="any" placeholder="e.g., 11.4">
    </div>
    <div id="sd1wrap">
      <label>Sample A — SD (use population σ if known)</label>
      <input id="sd1" type="number" step="any" placeholder="e.g., 3.1">
    </div>
    <div id="sd2wrap" style="display:none;">
      <label>Sample B — SD</label>
      <input id="sd2" type="number" step="any" placeholder="e.g., 2.7">
    </div>
    <div id="x1wrap" style="display:none;">
      <label>Sample A — x (success count)</label>
      <input id="x1" type="number" min="0" step="1" placeholder="e.g., 37">
    </div>
    <div id="x2wrap" style="display:none;">
      <label>Sample B — x</label>
      <input id="x2" type="number" min="0" step="1" placeholder="e.g., 29">
    </div>
    <div id="sigmaKnownWrap" style="display:none;">
      <label>For one-sample mean: is σ known?</label>
      <select id="sigmaKnown">
        <option value="no" selected>No (use t)</option>
        <option value="yes">Yes (use z)</option>
      </select>
    </div>
  </div>

  <div class="row" style="margin-top:10px;">
    <button class="btn" id="calcBtn">Calculate</button>
    <button class="btn secondary" id="clearBtn">Clear</button>
    <span class="muted">Outputs include step-by-step computations and formulas.</span>
  </div>

  <div id="error" class="danger" style="margin-top:10px;"></div>

  <h3 style="margin-top:18px;">Results</h3>
  <div id="results" class="card">
    <div class="muted">No results yet.</div>
  </div>

  <details style="margin-top:14px;">
    <summary><strong>Formulas used (click to expand)</strong></summary>
    <ul class="list">
      <li><em>One-sample mean (unknown σ):</em> <code class="k">\(\bar{x} \pm t_{1-\alpha/2,\;n-1}\cdot s/\sqrt{n}\)</code></li>
      <li><em>One-sample mean (known σ):</em> <code class="k">\(\bar{x} \pm z_{1-\alpha/2}\cdot \sigma/\sqrt{n}\)</code></li>
      <li><em>One-sample proportion (Wilson, continuity-corrected off):</em> 
        <code class="k">p̃ = (x + z²/2)/(n + z²), SẼ = √[p̃(1-p̃)/(n+z²)], CI: p̃ ± z·SẼ</code></li>
      <li><em>Two-sample means (Welch):</em> 
        <code class="k">Δ = \(\bar{x}_1 - \bar{x}_2\), SE = √(s₁²/n₁ + s₂²/n₂)</code>, 
        <code class="k">df ≈ Welch–Satterthwaite</code>, CI: Δ ± t<sub>df</sub>·SE</li>
      <li><em>Two-sample proportions (Newcombe):</em>
        CI for Δ uses Wilson CIs for p₁ and p₂ and combines: [L₁−U₂, U₁−L₂]</li>
      <li><em>Variance/SD CI:</em> <code class="k">\((n-1)s^2 / \chi^2_{1-\alpha/2,n-1}\;,\;(n-1)s^2 / \chi^2_{\alpha/2,n-1}\)</code> for σ²; take √ for σ.</li>
    </ul>
  </details>
</main>

<footer>
  <small>Tip: You can host this file on your LMS or GitHub Pages. Designed for teaching: shows steps and interprets results.</small>
</footer>

<script>
// ---------- Helpers ----------
function parseNumbers(text){
  if(!text) return [];
  return text.split(/[\s,;]+/).map(v=>v.trim()).filter(v=>v.length>0).map(Number).filter(v=>Number.isFinite(v));
}
function mean(arr){ return arr.reduce((a,b)=>a+b,0)/arr.length; }
function variance(arr){
  const m = mean(arr); const n = arr.length;
  return arr.reduce((s,x)=>s+(x-m)*(x-m),0)/(n-1);
}
function sd(arr){ return Math.sqrt(variance(arr)); }
function quantileNormal(p){ // inverse CDF for standard normal (Acklam approx)
  // For teaching, accuracy ~1e-7 is fine
  const a=[-3.969683028665376e+01,2.209460984245205e+02,-2.759285104469687e+02,1.383577518672690e+02,-3.066479806614716e+01,2.506628277459239e+00];
  const b=[-5.447609879822406e+01,1.615858368580409e+02,-1.556989798598866e+02,6.680131188771972e+01,-1.328068155288572e+01];
  const c=[-7.784894002430293e-03,-3.223964580411365e-01,-2.400758277161838e+00,-2.549732539343734e+00,4.374664141464968e+00,2.938163982698783e+00];
  const d=[7.784695709041462e-03,3.224671290700398e-01,2.445134137142996e+00,3.754408661907416e+00];
  const plow=0.02425, phigh=1-plow;
  let q, r;
  if (p<plow){
    q=Math.sqrt(-2*Math.log(p));
    return (((((c[0]*q+c[1])*q+c[2])*q+c[3])*q+c[4])*q+c[5])/
           ((((d[0]*q+d[1])*q+d[2])*q+d[3])*q+1);
  } else if (phigh<p){
    q=Math.sqrt(-2*Math.log(1-p));
    return -(((((c[0]*q+c[1])*q+c[2])*q+c[3])*q+c[4])*q+c[5])/
           ((((d[0]*q+d[1])*q+d[2])*q+d[3])*q+1);
  } else {
    q=p-0.5; r=q*q;
    return (((((a[0]*r+a[1])*r+a[2])*r+a[3])*r+a[4])*r+a[5])*q/
           (((((b[0]*r+b[1])*r+b[2])*r+b[3])*r+b[4])*r+1);
  }
}
// Incomplete: Student t critical by df via normal approximation + correction (sufficient for teaching)
function tCriticalTwoTailed(alpha, df){
  // For df>30, t≈z. For small df, use simple correction (empirical).
  const z = quantileNormal(1 - alpha/2);
  if (df>200) return z;
  // small-sample inflation
  // crude approx: t ≈ z * sqrt((df)/(df-2)) for df>2
  if (df>2) return z*Math.sqrt(df/(df-2));
  return 12; // guard
}
function chi2Quantile(p, k){
  // Wilson-Hilferty approximation is acceptable for teaching
  const z = quantileNormal(p);
  const a = 2/(9*k);
  return k*Math.pow(1 - a + z*Math.sqrt(a), 3);
}
function clamp01(x){ return Math.max(0, Math.min(1, x)); }
function fmt(x, d=4){ if (x===undefined || x===null || Number.isNaN(x)) return '—'; return (+x).toFixed(d); }

// ---------- UI wiring ----------
const estimatorEl = document.getElementById('estimator');
const confEl = document.getElementById('confLevel');
const dfPill = document.getElementById('dfPill');

const modeRawBtn = document.getElementById('modeRawBtn');
const modeSummaryBtn = document.getElementById('modeSummaryBtn');
const exampleBtn = document.getElementById('exampleBtn');

const rawInputs = document.getElementById('rawInputs');
const rawA = document.getElementById('rawA');
const rawBwrap = document.getElementById('rawBwrap');
const rawB = document.getElementById('rawB');

const summaryInputs = document.getElementById('summaryInputs');
const n1 = document.getElementById('n1'); const n2 = document.getElementById('n2'); const n2wrap=document.getElementById('n2wrap');
const mean1 = document.getElementById('mean1'); const mean2=document.getElementById('mean2'); const mean2wrap=document.getElementById('mean2wrap');
const sd1 = document.getElementById('sd1'); const sd2=document.getElementById('sd2'); const sd2wrap=document.getElementById('sd2wrap');
const x1 = document.getElementById('x1'); const x2=document.getElementById('x2'); const x1wrap=document.getElementById('x1wrap'); const x2wrap=document.getElementById('x2wrap');
const mean1wrap=document.getElementById('mean1wrap'); const sigmaKnownWrap=document.getElementById('sigmaKnownWrap'); const sigmaKnown=document.getElementById('sigmaKnown');
const sd1wrap=document.getElementById('sd1wrap'); const x2Wrap=document.getElementById('x2wrap');

const calcBtn = document.getElementById('calcBtn');
const clearBtn = document.getElementById('clearBtn');
const errorEl = document.getElementById('error');
const results = document.getElementById('results');

let inputMode = 'summary'; // 'raw' or 'summary'

function refreshVisibility(){
  const est = estimatorEl.value;
  // raw data areas
  rawInputs.style.display = (inputMode==='raw') ? '' : 'none';
  rawBwrap.style.display = (inputMode==='raw' && (est==='two_means' || est==='two_props')) ? '' : 'none';

  // summary areas
  summaryInputs.style.display = (inputMode==='summary') ? '' : 'none';
  const two = (est==='two_means' || est==='two_props');

  n2wrap.style.display = two ? '' : 'none';
  mean2wrap.style.display = (inputMode==='summary' && (est==='two_means' || est==='two_props')) ? '' : 'none';
  sd2wrap.style.display = (inputMode==='summary' && est==='two_means') ? '' : 'none';

  if (est==='one_prop'){ mean1wrap.querySelector('label').textContent = 'Sample A — p̂ (if known; else leave blank)'; }
  else { mean1wrap.querySelector('label').textContent = 'Sample A — mean (or p̂ for proportions)'; }

  x1wrap.style.display = (est==='one_prop' || est==='two_props') ? '' : 'none';
  x2wrap.style.display = (est==='two_props') ? '' : 'none';

  sigmaKnownWrap.style.display = (est==='one_mean') ? '' : 'none';

  sd1wrap.style.display = (est==='one_mean' || est==='two_means' || est==='var_ci') ? '' : 'none';
  mean2wrap.style.display = (est==='two_means') ? '' : (est==='two_props' ? '' : mean2wrap.style.display);
  mean2wrap.style.display = (est==='two_means' || est==='two_props') ? '' : 'none';

  // df pill resets
  dfPill.textContent = '';
}
refreshVisibility();

estimatorEl.addEventListener('change', refreshVisibility);
modeRawBtn.addEventListener('click', ()=>{ inputMode='raw'; refreshVisibility(); });
modeSummaryBtn.addEventListener('click', ()=>{ inputMode='summary'; refreshVisibility(); });
clearBtn.addEventListener('click', ()=>{
  [rawA, rawB, n1, n2, mean1, mean2, sd1, sd2, x1, x2].forEach(el=>{ if (el) el.value=''; });
  errorEl.textContent=''; results.innerHTML='<div class="muted">Cleared.</div>'; dfPill.textContent='';
});
exampleBtn.addEventListener('click', ()=>{
  const est = estimatorEl.value;
  inputMode = 'summary'; refreshVisibility();
  if (est==='one_mean'){ n1.value=25; mean1.value=10.2; sd1.value=3.1; sigmaKnown.value='no'; }
  else if (est==='one_prop'){ n1.value=120; x1.value=36; mean1.value=''; }
  else if (est==='two_means'){ n1.value=30; mean1.value=102; sd1.value=15; n2.value=28; mean2.value=95; sd2.value=17; }
  else if (est==='two_props'){ n1.value=150; x1.value=54; n2.value=160; x2.value=40; }
  else if (est==='var_ci'){ n1.value=22; sd1.value=3.4; }
});

function setError(msg){ errorEl.textContent = msg || ''; }
function setResults(html){ results.innerHTML = html; }

function ciMeanOneSample(n, xbar, sOrSigma, alpha, useZ){
  const se = sOrSigma/Math.sqrt(n);
  const crit = useZ ? quantileNormal(1-alpha/2) : tCriticalTwoTailed(alpha, n-1);
  const lo = xbar - crit*se, hi = xbar + crit*se;
  return {estimate:xbar,se,crit,lo,hi,df:useZ?Infinity:(n-1)};
}
function ciPropWilson(x, n, alpha){
  const z = quantileNormal(1-alpha/2);
  const ptilde = (x + (z*z)/2) / (n + z*z);
  const setilde = Math.sqrt(ptilde*(1-ptilde)/(n + z*z));
  const lo = clamp01(ptilde - z*setilde);
  const hi = clamp01(ptilde + z*setilde);
  return {phat:x/n, ptilde, setilde, z, lo, hi};
}
function ciDiffMeansWelch(n1, m1, s1, n2, m2, s2, alpha){
  const diff = m1 - m2;
  const v1 = s1*s1/n1, v2 = s2*s2/n2;
  const se = Math.sqrt(v1+v2);
  // Welch–Satterthwaite df
  const df = Math.pow(v1+v2,2) / ( (v1*v1)/(n1-1) + (v2*v2)/(n2-1) );
  const tcrit = tCriticalTwoTailed(alpha, df);
  const lo = diff - tcrit*se, hi = diff + tcrit*se;
  return {diff,se,df,tcrit,lo,hi};
}
function ciVarChiSquare(n, s, alpha){
  const df = n-1;
  const chiLo = chi2Quantile(alpha/2, df);
  const chiHi = chi2Quantile(1 - alpha/2, df);
  const varLo = df*s*s/chiHi;
  const varHi = df*s*s/chiLo;
  return {df, chiLo, chiHi, varLo, varHi, sdLo: Math.sqrt(varLo), sdHi: Math.sqrt(varHi)};
}
function ciDiffPropsNewcombe(x1,n1,x2,n2,alpha){
  const w1 = ciPropWilson(x1,n1,alpha);
  const w2 = ciPropWilson(x2,n2,alpha);
  const diff = (x1/n1) - (x2/n2);
  const lo = w1.lo - w2.hi;
  const hi = w1.hi - w2.lo;
  return {diff, lo, hi, w1, w2};
}

calcBtn.addEventListener('click', ()=>{
  try {
    setError('');
    const est = estimatorEl.value;
    const alpha = 1 - parseFloat(confEl.value);

    let out = '';
    if (inputMode==='raw'){
      const A = parseNumbers(rawA.value);
      if (!A.length) return setError('Please enter at least one value for Sample A.');
      let B = [];
      if (est==='two_means' || est==='two_props'){
        B = parseNumbers(rawB.value);
        if (!B.length) return setError('Please enter values for Sample B.');
      }

      if (est==='one_mean'){
        const n=A.length, xbar=mean(A), s=sd(A);
        const c = ciMeanOneSample(n, xbar, s, alpha, false);
        dfPill.textContent = `df = ${fmt(c.df,0)}`;
        out += `<p><strong>One-sample mean (t):</strong> <em>n</em>=${n}, <em>mean</em>=${fmt(xbar)}, <em>sd</em>=${fmt(s)}</p>`;
        out += `<p>SE = s/√n = ${fmt(c.se)}; t* = ${fmt(c.crit)}; CI = [${fmt(c.lo)}, ${fmt(c.hi)}]</p>`;
      } else if (est==='two_means'){
        const nA=A.length, nB=B.length, mA=mean(A), mB=mean(B), sA=sd(A), sB=sd(B);
        const c = ciDiffMeansWelch(nA,mA,sA,nB,mB,sB,alpha);
        dfPill.textContent = `Welch df ≈ ${fmt(c.df,2)}`;
        out += `<p><strong>Two-sample mean difference (Welch):</strong> Δ = ${fmt(c.diff)}  (A−B)</p>`;
        out += `<p>SE = √(s₁²/n₁ + s₂²/n₂) = ${fmt(c.se)}; t* = ${fmt(c.tcrit)}; CI = [${fmt(c.lo)}, ${fmt(c.hi)}]</p>`;
      } else if (est==='one_prop' || est==='two_props'){
        return setError('Raw mode for proportions isn’t supported: provide x and n (summary mode).');
      } else if (est==='var_ci'){
        const n=A.length, s=sd(A);
        const c = ciVarChiSquare(n,s,alpha);
        dfPill.textContent = `df = ${c.df}`;
        out += `<p><strong>Variance/SD CI:</strong> n=${n}, s=${fmt(s)}</p>`;
        out += `<p>σ² CI = [${fmt(c.varLo)}, ${fmt(c.varHi)}]; σ CI = [${fmt(c.sdLo)}, ${fmt(c.sdHi)}]</p>`;
      }
      setResults(out);
      return;
    }

    // summary mode
    if (est==='one_mean'){
      const n = +n1.value, xbar = +mean1.value, s = +sd1.value;
      if (!(n>1 && Number.isFinite(xbar) && Number.isFinite(s) && s>=0)) return setError('Enter valid n (>1), mean, and SD.');
      const useZ = (sigmaKnown.value==='yes');
      const sOrSigma = s;
      const c = ciMeanOneSample(n, xbar, sOrSigma, alpha, useZ);
      dfPill.textContent = useZ ? 'z critical' : `df = ${fmt(c.df,0)}`;
      let interp = `We estimate μ ≈ ${fmt(c.estimate)}. The ${+(confEl.value)*100}% CI is [${fmt(c.lo)}, ${fmt(c.hi)}].`;
      out += `<p><strong>One-sample mean (${useZ?'z':'t'})</strong></p>`;
      out += `<p>SE = ${fmt(c.se)}; critical = ${fmt(c.crit)}; CI = [${fmt(c.lo)}, ${fmt(c.hi)}]</p>`;
      out += `<p class="ok">${interp}</p>`;
      setResults(out);
    }
    else if (est==='one_prop'){
      const n = +n1.value; const x = +x1.value;
      if (!(n>0 && Number.isFinite(x) && x>=0 && x<=n)) return setError('Enter valid n and x (0 ≤ x ≤ n).');
      const c = ciPropWilson(x,n,alpha);
      dfPill.textContent = 'Wilson method';
      out += `<p><strong>One-sample proportion (Wilson CI)</strong></p>`;
      out += `<p>p̂ = ${fmt(c.phat)}; adjusted p̃ = ${fmt(c.ptilde)}; SẼ = ${fmt(c.setilde)}; z* = ${fmt(c.z)}</p>`;
      out += `<p>CI = [${fmt(c.lo)}, ${fmt(c.hi)}]</p>`;
      setResults(out);
    }
    else if (est==='two_means'){
      const N1=+n1.value, M1=+mean1.value, S1=+sd1.value, N2=+n2.value, M2=+mean2.value, S2=+sd2.value;
      if (!(N1>1 && N2>1 && [M1,M2,S1,S2].every(Number.isFinite))) return setError('Enter valid n1,n2 (>1), means, and SDs.');
      const c = ciDiffMeansWelch(N1,M1,S1,N2,M2,S2,alpha);
      dfPill.textContent = `Welch df ≈ ${fmt(c.df,2)}`;
      out += `<p><strong>Two-sample mean difference (Welch)</strong></p>`;
      out += `<p>Δ = ${fmt(c.diff)} (A−B); SE = ${fmt(c.se)}; t* = ${fmt(c.tcrit)}; CI = [${fmt(c.lo)}, ${fmt(c.hi)}]</p>`;
      setResults(out);
    }
    else if (est==='two_props'){
      const N1=+n1.value, X1v=+x1.value, N2v=+n2.value, X2v=+x2.value;
      if (!(N1>0 && N2>0 && X1v>=0 && X2v>=0 && X1v<=N1 && X2v<=N2)) return setError('Enter valid n1,n2 and x1,x2 with 0 ≤ x ≤ n.');
      const c = ciDiffPropsNewcombe(X1v,N1,X2v,N2,alpha);
      dfPill.textContent = 'Newcombe (Wilson-based)';
      out += `<p><strong>Two-sample proportion difference (Newcombe/Wilson)</strong></p>`;
      out += `<p>Δ = p̂₁ − p̂₂ = ${fmt(c.diff)}; CI = [${fmt(c.lo)}, ${fmt(c.hi)}]</p>`;
      out += `<p class="muted">p̂₁ CI = [${fmt(c.w1.lo)}, ${fmt(c.w1.hi)}]; p̂₂ CI = [${fmt(c.w2.lo)}, ${fmt(c.w2.hi)}]</p>`;
      setResults(out);
    }
    else if (est==='var_ci'){
      const N=+n1.value, S=+sd1.value;
      if (!(N>1 && Number.isFinite(S) && S>=0)) return setError('Enter valid n (>1) and sample SD.');
      const c = ciVarChiSquare(N,S,alpha);
      dfPill.textContent = `df = ${c.df}`;
      out += `<p><strong>Variance / SD CI (chi-square)</strong></p>`;
      out += `<p>σ² CI = [${fmt(c.varLo)}, ${fmt(c.varHi)}]; σ CI = [${fmt(c.sdLo)}, ${fmt(c.sdHi)}]</p>`;
      setResults(out);
    }
  } catch (e){
    setError('Unexpected error: '+e.message);
  }
});
</script>
</body>
</html>
